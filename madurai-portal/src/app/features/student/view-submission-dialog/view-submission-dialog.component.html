<h2 mat-dialog-title>ğŸ“„ Submission Details</h2>

<mat-dialog-content class="dialog-content">
  <div *ngIf="submission">
    <p><strong>Assignment:</strong> {{ submission.assignmentTitle }}</p>
    <p><strong>Batch:</strong> {{ submission.batchName }}</p>
    <p><strong>Submitted At:</strong> {{ submission.submittedAt | date:'medium' }}</p>
    <p><strong>Status:</strong> {{ submission.status }}</p>

    <div *ngIf="submission.textAnswer">
      <h6>ğŸ“ Answer</h6>
      <p>{{ submission.textAnswer }}</p>
    </div>

    <div *ngIf="submission.attachmentUrls?.length" class="attachments-section">
      <h6>ğŸ“ Attachments</h6>
      <div class="attachment-grid">
        <div *ngFor="let url of submission.attachmentUrls" class="attachment-item">
          <ng-container [ngSwitch]="getFileType(url)">
            <!-- PDF Preview -->
            <iframe
              *ngSwitchCase="'pdf'"
              [src]="url | safeUrl"
              width="100%"
              height="200px"
            ></iframe>

            <!-- Image Preview -->
            <img
              *ngSwitchCase="'image'"
              [src]="url"
              alt="Attachment Preview"
              class="attachment-image"
            />

            <!-- Other Files -->
            <a *ngSwitchDefault [href]="url" target="_blank">
              <mat-icon inline>insert_drive_file</mat-icon>
              {{ extractFileName(url) }}
            </a>
          </ng-container>
        </div>
      </div>
    </div>

    <div *ngIf="submission.teacherRemarks">
      <h6>ğŸ§‘â€ğŸ« Teacher Remarks</h6>
      <p>{{ submission.teacherRemarks }}</p>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-stroked-button mat-dialog-close color="primary">Close</button>
</mat-dialog-actions>
